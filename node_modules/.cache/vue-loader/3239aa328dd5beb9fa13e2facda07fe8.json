{"remainingRequest":"C:\\Users\\Mr.Ye\\Desktop\\vue数据中心\\datacenter\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Mr.Ye\\Desktop\\vue数据中心\\datacenter\\src\\views\\History.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Mr.Ye\\Desktop\\vue数据中心\\datacenter\\src\\views\\History.vue","mtime":1601373819620},{"path":"C:\\Users\\Mr.Ye\\Desktop\\vue数据中心\\datacenter\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Mr.Ye\\Desktop\\vue数据中心\\datacenter\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Mr.Ye\\Desktop\\vue数据中心\\datacenter\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Mr.Ye\\Desktop\\vue数据中心\\datacenter\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKCWRhdGEoKSB7CgkJcmV0dXJuIHsKCQkJY29sdW1uc0RhdGE6W10sCgkJCXRhYmxlQ291bnQ6MCwKCQkJY3VycmVudFBhZ2U6IDEsCgkJCXBhZ2VTaXplOiAyMCwKCQkJY3VyUGFnZTogMSwKCQkJcGFnZXNpemU6IDIwLAoJCQl0YWJsZURhdGE6IFtdLAoJCQl0YWJsZU9mZnNldDpudWxsCgkJfQoJfSwKCWNvbXB1dGVkOiB7CgkJLyoqCgkJICogQHJldHVybiB7Ym9vbGVhbn0KCQkgKi8KCQlXcmFwU2hvdygpIHsKCQkJcmV0dXJuICF0aGlzLiRzdG9yZS5zdGF0ZS5OYXZTaG93OwoJCX0KCX0sCgltb3VudGVkKCkgewoJCXRoaXMuZ2V0VGFibGVDb3VubW5zKCk7CgkJbGV0IG9mZnNldFRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJsZScpLm9mZnNldFRvcCAtIDUwIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIC0gNTA7CgkJbGV0IHdyYXBIID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnd3JhcCcpWzBdLmNsaWVudEhlaWdodCAtIDUwOwoJCXRoaXMudGFibGVPZmZzZXQgPSB3cmFwSCAtIG9mZnNldFRvcCAtIDMyOwoJfSwKCW1ldGhvZHM6ewoJCWdldFRhYmxlQ291bm1ucygpewoJCQl0aGlzLiRodHRwKHsKCQkJCXVybDogIlRhYmxlRmlsZWQiLAoJCQkJZGF0YTogewoJCQkJCSJ0YWJsZU5hbWUiOiAiSGlzdG9yeSIKCQkJCX0KCQkJfSkudGhlbihyZXMgPT4gewoJCQkJdGhpcy5jb2x1bW5zRGF0YSA9IFtdOwoKCQkJCWZvcihsZXQgaXRlbSBpbiByZXMpewoJCQkJCXRoaXMuY29sdW1uc0RhdGEucHVzaChyZXNbaXRlbV0pOwoJCQkJfQoJCQkJdGhpcy5nZXRUYWJsZURhdGEoKTsKCQkJfSk7CgkJfSwKCQlnZXRUYWJsZURhdGEocGFnZVNpemUsIGN1clBhZ2UpewoJCQl0aGlzLiRodHRwKHsKCQkJCXVybDonSGlzdG9yeScsCgkJCQlkYXRhOnsKCQkJCQkiUGFnZVNpemUiOiBwYWdlU2l6ZSA/IHBhZ2VTaXplIDogIjIwIiwKCQkJCQkiQ3VyUGFnZSI6IGN1clBhZ2UgPyBjdXJQYWdlIDogIjEiCgkJCQl9CgkJCX0pLnRoZW4ocmVzPT57CgkJCQl0aGlzLnRhYmxlQ291bnQgPSByZXMuZGF0YVsndG90YWwnXTsKCQkJCXRoaXMudGFibGVEYXRhID0gW107CgkJCQlyZXMuZGF0YVsncm93cyddID0gSlNPTi5wYXJzZShyZXMuZGF0YVsncm93cyddKTsKCQkJCWZvciAobGV0IGkgPSAwOyBpIDwgcmVzLmRhdGFbJ3Jvd3MnXS5sZW5ndGg7IGkrKykgewoJCQkJCXJlcy5kYXRhWydyb3dzJ11baV1bJ+S6i+S7tuaXtumXtCddID0gdGhpcy5mb3JtYXRlVGltZShyZXMuZGF0YVsncm93cyddW2ldWyfkuovku7bml7bpl7QnXSk7CgkJCQkJdGhpcy50YWJsZURhdGEucHVzaChyZXMuZGF0YVsncm93cyddW2ldKTsKCQkJCX0KCQkJfSkKCQl9LAoJCWhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIChjdXJyZW50UGFnZSkgewoJCQl0aGlzLmN1cnJlbnRQYWdlID0gY3VycmVudFBhZ2U7CgkJCXRoaXMuZ2V0VGFibGVEYXRhKHRoaXMucGFnZXNpemUsIHRoaXMuY3VycmVudFBhZ2UpOwoJCX0sCgkJaGFuZGxlU2l6ZUNoYW5nZTogZnVuY3Rpb24gKHNpemUpIHsKCQkJdGhpcy5wYWdlc2l6ZSA9IHNpemU7CgkJCXRoaXMuY3VycmVudFBhZ2UgPSAxOwoJCQl0aGlzLmdldFRhYmxlRGF0YSh0aGlzLnBhZ2VzaXplLCB0aGlzLmN1cnJlbnRQYWdlKTsKCQl9LAoJCWZvcm1hdGVUaW1lKHRpbWUpIHsKCQkJaWYgKHRpbWUpIHsKCQkJCXZhciBkYXRldGltZSA9IG5ldyBEYXRlKHRpbWUpOwoJCQkJdmFyIHllYXIgPSBkYXRldGltZS5nZXRGdWxsWWVhcigpOwoJCQkJdmFyIG1vbnRoID0gZGF0ZXRpbWUuZ2V0TW9udGgoKSArIDE7CgkJCQl2YXIgZGF0ZSA9IGRhdGV0aW1lLmdldERhdGUoKTsKCQkJCXZhciBob3VyID0gZGF0ZXRpbWUuZ2V0SG91cnMoKSA+IDkgPyBkYXRldGltZS5nZXRIb3VycygpIDogJzAnICsgZGF0ZXRpbWUuZ2V0SG91cnMoKTsKCQkJCXZhciBtaW4gPSBkYXRldGltZS5nZXRNaW51dGVzKCkgPiA5ID8gZGF0ZXRpbWUuZ2V0TWludXRlcygpIDogJzAnICsgZGF0ZXRpbWUuZ2V0TWludXRlcygpOwoJCQkJcmV0dXJuIHllYXIgKyAnLycgKyBtb250aCArICcvJyArIGRhdGUgKyAnICcgKyBob3VyICsgJzonICsgbWluOwoJCQl9CgkJfQoJfQp9Cg=="},{"version":3,"sources":["History.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"History.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div class=\"wrap\" :class=\"{'WrapShow':WrapShow}\">\r\n\t\t<h1>用户的登陆记录</h1>\r\n\t\t<div id=\"table\" style=\"margin-top: 15px;\">\r\n\t\t\t<el-table\r\n\t\t\t\t\t:data=\"tableData\"\r\n\t\t\t\t\tborder\r\n\t\t\t\t\tsize=\"mini\"\r\n\t\t\t\t\tref=\"filterTable\"\r\n\t\t\t\t\t:fit=\"true\"\r\n\t\t\t\t\t:default-sort=\"{prop: 'date', order: 'descending'}\"\r\n\t\t\t\t\tstyle=\"width: 100%\"\r\n\t\t\t\t\t:cell-style=\"{padding:'0px'}\"\r\n\t\t\t\t\t:height=\"tableOffset\"\r\n\t\t\t>\r\n\t\t\t\t<template v-for=\"item in columnsData\">\r\n\t\t\t\t\t<el-table-column\r\n\t\t\t\t\t\t\t:key=\"item\"\r\n\t\t\t\t\t\t\t:prop=\"item\"\r\n\t\t\t\t\t\t\t:label=\"item\"\r\n\t\t\t\t\t\t\tsortable\r\n\t\t\t\t\t\t\tshow-overflow-tooltip\r\n\t\t\t\t\t\t\t:min-width=\"120\"\r\n\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table>\r\n\t\t\t<el-pagination\r\n\t\t\t\t\tbackground\r\n\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t@size-change=\"handleSizeChange\"\r\n\t\t\t\t\t@current-change=\"handleCurrentChange\"\r\n\t\t\t\t\t:current-page=\"currentPage\"\r\n\t\t\t\t\t:page-sizes=\"[ 10, 20, 50,100]\"\r\n\t\t\t\t\t:page-size=\"pagesize\"\r\n\t\t\t\t\t:total=\"tableCount\">\r\n\t\t\t</el-pagination>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcolumnsData:[],\r\n\t\t\t\ttableCount:0,\r\n\t\t\t\tcurrentPage: 1,\r\n\t\t\t\tpageSize: 20,\r\n\t\t\t\tcurPage: 1,\r\n\t\t\t\tpagesize: 20,\r\n\t\t\t\ttableData: [],\r\n\t\t\t\ttableOffset:null\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t/**\r\n\t\t\t * @return {boolean}\r\n\t\t\t */\r\n\t\t\tWrapShow() {\r\n\t\t\t\treturn !this.$store.state.NavShow;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getTableCounmns();\r\n\t\t\tlet offsetTop = document.getElementById('table').offsetTop - 50 || document.body.scrollTop - 50;\r\n\t\t\tlet wrapH = document.getElementsByClassName('wrap')[0].clientHeight - 50;\r\n\t\t\tthis.tableOffset = wrapH - offsetTop - 32;\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tgetTableCounmns(){\r\n\t\t\t\tthis.$http({\r\n\t\t\t\t\turl: \"TableFiled\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\"tableName\": \"History\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.columnsData = [];\r\n\r\n\t\t\t\t\tfor(let item in res){\r\n\t\t\t\t\t\tthis.columnsData.push(res[item]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getTableData();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetTableData(pageSize, curPage){\r\n\t\t\t\tthis.$http({\r\n\t\t\t\t\turl:'History',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\"PageSize\": pageSize ? pageSize : \"20\",\r\n\t\t\t\t\t\t\"CurPage\": curPage ? curPage : \"1\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tthis.tableCount = res.data['total'];\r\n\t\t\t\t\tthis.tableData = [];\r\n\t\t\t\t\tres.data['rows'] = JSON.parse(res.data['rows']);\r\n\t\t\t\t\tfor (let i = 0; i < res.data['rows'].length; i++) {\r\n\t\t\t\t\t\tres.data['rows'][i]['事件时间'] = this.formateTime(res.data['rows'][i]['事件时间']);\r\n\t\t\t\t\t\tthis.tableData.push(res.data['rows'][i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleCurrentChange: function (currentPage) {\r\n\t\t\t\tthis.currentPage = currentPage;\r\n\t\t\t\tthis.getTableData(this.pagesize, this.currentPage);\r\n\t\t\t},\r\n\t\t\thandleSizeChange: function (size) {\r\n\t\t\t\tthis.pagesize = size;\r\n\t\t\t\tthis.currentPage = 1;\r\n\t\t\t\tthis.getTableData(this.pagesize, this.currentPage);\r\n\t\t\t},\r\n\t\t\tformateTime(time) {\r\n\t\t\t\tif (time) {\r\n\t\t\t\t\tvar datetime = new Date(time);\r\n\t\t\t\t\tvar year = datetime.getFullYear();\r\n\t\t\t\t\tvar month = datetime.getMonth() + 1;\r\n\t\t\t\t\tvar date = datetime.getDate();\r\n\t\t\t\t\tvar hour = datetime.getHours() > 9 ? datetime.getHours() : '0' + datetime.getHours();\r\n\t\t\t\t\tvar min = datetime.getMinutes() > 9 ? datetime.getMinutes() : '0' + datetime.getMinutes();\r\n\t\t\t\t\treturn year + '/' + month + '/' + date + ' ' + hour + ':' + min;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n"]}]}